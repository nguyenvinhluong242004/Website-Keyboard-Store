<div class="product-listing">
    <!-- Search and filters -->
    <div class="search-bar">
        <input id="search" type="search" placeholder="search..." class="search-input">
        <button id="sort-button" class="search-button">Search</button>
    </div>
    <div class="search-filters">
        <div class="filters">
            <select id="availability" class="filter-select">
                <option value="">Availability</option>
                <option value="in-stock">In Stock</option>
                <option value="out-of-stock">Out of Stock</option>
            </select>

            <select id="category" class="filter-select">
                <option value="">Type</option>
                {{#each categories}}
                    <option value="{{this.categoryname}}">{{this.categoryname}}</option>
                {{/each}}
            </select>

            <select id="brand" class="filter-select">
                <option value="">Brand</option>
                {{#each brands}}
                    <option value="{{this.brandname}}">{{this.brandname}}</option>
                {{/each}}
            </select>

            <select id="price" class="filter-select">
                <option value="">Price</option>
                <option value="under-1000000">Under 1,000,000</option>
                <option value="1000000-5000000">1,000,000 - 5,000,000</option>
                <option value="over-5000000">Over 5,000,000</option>
            </select>

            <select id="sort" class="filter-select">
                <option value="">Sort by</option>
                <option value="price-low-high">Price, low to high</option>
                <option value="price-high-low">Price, high to low</option>
            </select>
        </div>
        <button id="sort-button2" class="sort-button">Sort</button>
    </div>

    <!-- Product listings -->
    <div class="product-list" id="product-list">
        {{#each allProducts.data}}
        <div class="product-card">
            <img src="{{this.firstImage}}" alt="{{this.productname}}" class="product-image">

            <div class="product-details">
                <p class="product-name">[ {{this.status}} ] {{this.productname}}</p>
                <div class="product-info">
                    <div class="price-row">
                        <span class="price-label">Type:</span>
                        <span>{{this.categoryname}}</span>
                    </div>
                    <div class="price-row">
                        <span class="price-label">Listed price:</span>
                        <span>{{this.oldprice}}</span>                        
                    </div>
                    <div class="price-row">
                        <span class="price-label">Brand:</span>
                        <span>{{this.brandname}}</span>
                    </div>
                    <div class="price-row">
                        <span class="price-label">Adjusted price:</span>
                        <span>{{this.currentprice}}</span>
                    </div>
                </div>
            </div>

            <button class="edit-button data-id="${{this.productid}}"">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
                    <path d="M12.146.854a.5.5 0 0 1 .708 0l2.292 2.292a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2L2 11.207V13h1.793L14 3.793 11.207 2zm1.586-.793 1 1L13.207 2l-1-1 1.586-1.586z"/>
                </svg>
            </button>
            
            <button class="delete-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M9 3h6a1 1 0 0 1 1 1v1h5a1 1 0 1 1 0 2h-1v13a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7H3a1 1 0 1 1 0-2h5V4a1 1 0 0 1 1-1zm1 2v1h4V5h-4zm-4 3v13a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V8H6zm3 3a1 1 0 0 1 1 1v7a1 1 0 1 1-2 0v-7a1 1 0 0 1 1-1zm6 0a1 1 0 0 1 1 1v7a1 1 0 1 1-2 0v-7a1 1 0 0 1 1-1z"/>
                </svg>
            </button>
        </div>
        {{/each}}
    </div>

    <div class="pagination" id="pagination">
    </div>
</div>

<div id="product-popup" class="popup hidden">
    <div class="popup-content">
        <h3>Edit Product</h3>
        <form id="edit-form">
            <label for="edit-product-name">Product Name</label>
            <input type="text" id="edit-product-name" name="productname" required>

            <label for="edit-specification">Specification</label>
            <input type="text" id="edit-specification" name="specification" required>

            <label for="edit-old-price">Old Price</label>
            <input type="number" id="edit-old-price" name="oldprice" required>

            <label for="edit-current-price">Current Price</label>
            <input type="number" id="edit-current-price" name="currentprice" required>

            <label for="edit-estimate-arrive">Estimate Arrive</label>
            <input type="number" id="edit-estimate-arrive" name="estimate_arrive" required>

            <label for="edit-description">Description</label>
            <textarea id="edit-description" name="description" required></textarea>

            <label for="edit-category">Category</label>
            <select id="edit-category" name="category" required>
                {{#each categories}}
                    <option value="{{this.categoryid}}">{{this.categoryname}}</option>
                {{/each}}
            </select>

            <label for="edit-brand">Brand</label>
            <select id="edit-brand" name="brand" required>
                {{#each brands}}
                    <option value="{{this.brandid}}">{{this.brandname}}</option>
                {{/each}}
            </select>

            <label for="edit-quantity">Quantity</label>
            <input type="number" id="edit-quantity" name="quantity" required>

            <label for="edit-type">Type</label>
            <input type="text" id="edit-type" name="type" required>

            <div class="popup-actions">
                <button type="button" id="save-button">Save</button>
                <button type="button" id="cancel-button">Cancel</button>
            </div>
        </form>
    </div>
</div>